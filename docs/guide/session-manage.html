<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>概述 | Netty-Starter</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Netty快速开发的高性能IO整合框架">
    
    <link rel="preload" href="/spring-boot-netty-starter/assets/css/0.styles.c48434c2.css" as="style"><link rel="preload" href="/spring-boot-netty-starter/assets/js/app.2662a8e6.js" as="script"><link rel="preload" href="/spring-boot-netty-starter/assets/js/2.b8bc1b17.js" as="script"><link rel="preload" href="/spring-boot-netty-starter/assets/js/20.45c71554.js" as="script"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/10.735ef0e8.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/11.18e13c56.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/12.4f88568e.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/13.54bc547b.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/14.bc8e198e.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/15.b80193b3.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/16.30d32fab.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/17.e6d982c6.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/18.eb2929cb.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/19.71cf84d6.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/21.d9bb49a9.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/22.6a34d6bc.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/23.b6b223ce.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/24.be51af9c.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/25.1f96f7f3.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/26.012e68b3.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/27.f341870f.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/28.2223476c.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/29.a0e4bd57.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/3.a91baf80.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/30.63ba3af6.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/4.06f6214b.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/5.05e225c9.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/6.dc8cf972.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/7.256e2f45.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/8.20c65693.js"><link rel="prefetch" href="/spring-boot-netty-starter/assets/js/9.6a38a202.js">
    <link rel="stylesheet" href="/spring-boot-netty-starter/assets/css/0.styles.c48434c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-boot-netty-starter/" class="home-link router-link-active"><img src="/spring-boot-netty-starter/access/logo.png" alt="Netty-Starter" class="logo"> <span class="site-name can-hide">Netty-Starter</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-boot-netty-starter/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/spring-boot-netty-starter/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/spring-boot-netty-starter/version/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="https://gitee.com/lee_coding/spring-boot-netty-starter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/spring-boot-netty-starter/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/spring-boot-netty-starter/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/spring-boot-netty-starter/version/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="https://gitee.com/lee_coding/spring-boot-netty-starter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>指南</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring-boot-netty-starter/guide/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/spring-boot-netty-starter/guide/get-start.html" class="sidebar-link">起步(Get Start)</a></li><li><a href="/spring-boot-netty-starter/guide/context.html" class="sidebar-link">全局上下文(Context)</a></li><li><a href="/spring-boot-netty-starter/guide/auto-config.html" class="sidebar-link">配置(Configure)</a></li><li><a href="/spring-boot-netty-starter/guide/session-manage.html" aria-current="page" class="active sidebar-link">通道管理器(SessionManage)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#管理" class="sidebar-link">管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#查找-sessionfind" class="sidebar-link">查找(SessionFind)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#维护-sessionmanager" class="sidebar-link">维护(SessionManager)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#适配器-adaptersessionmanager" class="sidebar-link">适配器(AdapterSessionManager)</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#连接对象" class="sidebar-link">连接对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#客户端-session" class="sidebar-link">客户端(Session)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#群组-groupsession" class="sidebar-link">群组(GroupSession)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#应用程序-applicationsession" class="sidebar-link">应用程序(ApplicationSession)</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#回调" class="sidebar-link">回调</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#连接-messagecallback" class="sidebar-link">连接(MessageCallback)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#群组-messagegroupcallback" class="sidebar-link">群组(MessageGroupCallback)</a></li><li class="sidebar-sub-header"><a href="/spring-boot-netty-starter/guide/session-manage.html#客户端-messageservercallback" class="sidebar-link">客户端(MessageServerCallback)</a></li></ul></li></ul></li><li><a href="/spring-boot-netty-starter/guide/protocol.html" class="sidebar-link">协议(Protocol)</a></li><li><a href="/spring-boot-netty-starter/guide/handler.html" class="sidebar-link">处理器(Handler)</a></li><li><a href="/spring-boot-netty-starter/guide/interceptor.html" class="sidebar-link">拦截器(Interceptor)</a></li><li><a href="/spring-boot-netty-starter/guide/lambda.html" class="sidebar-link">Lambda监听器(Listener)</a></li><li><a href="/spring-boot-netty-starter/guide/annotation.html" class="sidebar-link">注解(Annotation)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p><code>SessionManager</code>是一个对<code>Netty</code>的<code>Channel</code>管理的封装,能够对现有连接客户端的通信做管理,包括增删改查,单点发送,群组发送等.</p> <div class="custom-block tip"><p class="custom-block-title">注意事项</p> <p><code>SessionManager</code>是一个接口,其内部已经做了统一实现,如果需要单独定制,请单独实现<code>SessionManager</code>接口并加入到<code>Spring</code>的<code>IOC</code>容器中,框架会自动替换原有的默认实现,如果你这么做,请<b>保证</b>它是一个<b>单例</b>,否则数据将得不到任何保证.</p></div> <h2 id="管理"><a href="#管理" class="header-anchor">#</a> 管理</h2> <p><code>Session</code>的管理包含了一系列的<code>Session</code>处理,其中包含了查找,消息发送,全局适配等功能</p> <h3 id="查找-sessionfind"><a href="#查找-sessionfind" class="header-anchor">#</a> 查找(<code>SessionFind</code>)</h3> <p><code>SessionFind</code>是一个<code>Session</code>查找的接口,通过这个类可以很方便的查找当前在线客户端.</p> <h4 id="findsession"><a href="#findsession" class="header-anchor">#</a> <code>findSession</code></h4> <ul><li>定义
<p>根据<code>Session</code>的<code>id</code>找到当前在线的<code>Session</code>对象</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Session</span> <span class="token function">findSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>一个可以被序列化的值,这个值是你在<a href="/spring-boot-netty-starter/guide/interceptor.html"><code>Session</code>注册</a>的时候写入的<code>id</code></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">注意事项</p> <p>这个id一定是一个具体的类型,而不是一个接口类型,或者你所实现的这个id类的HasCode和equals方法必须被重写以保证它的幂等性是在校验某个值而不是地址.</p></div> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>根据<code>id</code>找到的<code>Session</code>对象,没有则返回<code>NULL</code></td></tr></tbody></table> <h4 id="findsessionchannel"><a href="#findsessionchannel" class="header-anchor">#</a> <code>findSessionChannel</code></h4> <ul><li>定义
<p>根据<code>Channel</code>的<code>id</code>找到当前在线的<code>Session</code>对象</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Session</span> <span class="token function">findSessionChannel</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>io.netty.channel.ChannelId</code> extend <code>java.io.Serializable</code></td> <td><code>Channel</code>的<code>id</code></td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>根据<code>id</code>找到的<code>Session</code>对象,没有则返回<code>NULL</code></td></tr></tbody></table> <h4 id="findgroupsession"><a href="#findgroupsession" class="header-anchor">#</a> <code>findGroupSession</code></h4> <ul><li>定义
<p>根据组群的<code>id</code>找到当前的<code>GroupSession</code>对象</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">GroupSession</span> <span class="token function">findGroupSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>一个能被序列化的任意值,同<code>findSession</code>参数一致</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>GroupSession</code></td> <td><code>site.peaklee.framework.session.impl.GroupSession</code></td> <td>根据<code>id</code>找到的<code>GroupSession</code>对象,没有则返回<code>NULL</code></td></tr></tbody></table> <h4 id="findsessioningroup"><a href="#findsessioningroup" class="header-anchor">#</a> <code>findSessionInGroup</code></h4> <ul><li>定义
<p>根据组群的<code>id</code>找到在当前群组中<code>Session</code>主键值为<code>id</code>的<code>Session</code>对象</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Session</span> <span class="token function">findSessionInGroup</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>groupId</code></td> <td><code>java.io.Serializable</code></td> <td>一个能被序列化的任意值,同<code>findSession</code>参数一致</td></tr> <tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>一个能被序列化的任意值,同<code>findSession</code>参数一致</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>找到返回<code>Session</code>对象,没有则返回<code>NULL</code></td></tr></tbody></table> <h3 id="维护-sessionmanager"><a href="#维护-sessionmanager" class="header-anchor">#</a> 维护(<code>SessionManager</code>)</h3> <p><code>SessionManager</code>是一个<code>Session</code>增删改发的接口,通过这个类可以很方便的对当前在线客户端进行操作.</p> <h4 id="registrysession"><a href="#registrysession" class="header-anchor">#</a> <code>registrySession</code></h4> <ul><li>定义
<p>将当前的<a href="/spring-boot-netty-starter/guide/interceptor.html"><code>Session</code>注册</a>并加入到管理当中.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">boolean</span> <span class="token function">registrySession</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">registrySession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">,</span> <span class="token class-name">Session</span> session<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>可以同过<code>Session.create()</code>创建,也可以通过<code>AdapterSessionManager</code>的<code>findWithCreate()</code>方法创建.</td></tr> <tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>一个能被序列化的任意值,请注意它的唯一性,它将被当作唯一的主键,即使他们的<code>Session</code>不同,但是<code>id</code>相同也会认为相同</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>找到返回<code>Session</code>对象,没有则返回<code>NULL</code></td></tr></tbody></table> <h4 id="deregistersession"><a href="#deregistersession" class="header-anchor">#</a> <code>deregisterSession</code></h4> <ul><li>定义
<p>将当前的<a href="/spring-boot-netty-starter/guide/interceptor.html"><code>Session</code>注销</a>并从管理当中移除.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token class-name">Session</span> <span class="token function">deregisterSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>一个能被序列化的任意值,请注意它的唯一性,它将被当作唯一的主键,即使他们的<code>Session</code>不同,但是<code>id</code>相同也会认为相同</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>被移除的<code>Session</code>对象</td></tr></tbody></table> <h4 id="addsession"><a href="#addsession" class="header-anchor">#</a> <code>addSession</code></h4> <ul><li>定义
<p>将当前的<code>Session</code>加入到<code>id</code>为<code>groupId</code>的群组中.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">boolean</span> <span class="token function">addSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Session</span> session<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr> <tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>需要加入的<code>Session</code>对象</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Boolean</code></td> <td><code>java.lang.Boolean</code></td> <td>是否成功</td></tr></tbody></table> <h4 id="removesession"><a href="#removesession" class="header-anchor">#</a> <code>removeSession</code></h4> <ul><li>定义
<p>从<code>id</code>为<code>groupId</code>的群组中移除一个<code>Session</code>.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token class-name">Session</span> <span class="token function">removeSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>groupId</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr> <tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>需要移除的<code>Session</code>对象<code>id</code></td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>Session</code></td> <td><code>site.peaklee.framework.session.impl.Session</code></td> <td>被移除的<code>Session</code>对象</td></tr></tbody></table> <h4 id="creategroup"><a href="#creategroup" class="header-anchor">#</a> <code>createGroup</code></h4> <ul><li>定义
<p>根据<code>id</code>创建一个<code>GroupSession</code>对象.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token class-name">GroupSession</span> <span class="token function">createGroup</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>GroupSession</code></td> <td><code>site.peaklee.framework.session.impl.GroupSession</code></td> <td>创建的<code>GroupSession</code>对象</td></tr></tbody></table> <h4 id="removegroup"><a href="#removegroup" class="header-anchor">#</a> <code>removeGroup</code></h4> <ul><li>定义
<p>根据<code>id</code>移除一个<code>GroupSession</code>对象.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token class-name">GroupSession</span> <span class="token function">removeGroup</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr></tbody></table> <ul><li>返回值:</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>返回意义</th></tr></thead> <tbody><tr><td><code>GroupSession</code></td> <td><code>site.peaklee.framework.session.impl.GroupSession</code></td> <td>移除的<code>GroupSession</code>对象</td></tr></tbody></table> <h4 id="sendsession"><a href="#sendsession" class="header-anchor">#</a> <code>sendSession</code></h4> <ul><li>定义
<p>根据<code>id</code>对某个客户端发送消息.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">void</span> <span class="token function">sendSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> sendId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendSession</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> sendId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageCallback</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>客户端的id</td></tr> <tr><td><code>msg</code></td> <td><code>java.lang.Object</code></td> <td>需要发送的消息对象</td></tr> <tr><td><code>callback</code></td> <td><code>site.peaklee.framework.session.MessageCallback</code></td> <td>发送后的<a href="#%E8%BF%9E%E6%8E%A5-messagecallback">回调函数</a></td></tr></tbody></table> <ul><li>返回值:无</li></ul> <h4 id="sendgroupbroadcast"><a href="#sendgroupbroadcast" class="header-anchor">#</a> <code>sendGroupBroadcast</code></h4> <ul><li>定义
<p>根据<code>id</code>对某个群组发送消息.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">void</span> <span class="token function">sendGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exclude<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">,</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exclude<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr> <tr><td><code>msg</code></td> <td><code>java.lang.Object</code></td> <td>需要发送的消息对象</td></tr> <tr><td><code>callback</code></td> <td><code>site.peaklee.framework.session.MessageGroupCallback</code></td> <td>发送后的<a href="#%E7%BE%A4%E7%BB%84-messagegroupcallback">回调函数</a></td></tr> <tr><td><code>exclude</code></td> <td><code>site.peaklee.framework.session.impl.Session[]</code></td> <td>排除掉不需要发送的客户端</td></tr></tbody></table> <ul><li>返回值:无</li></ul> <h4 id="sendsomegroupbroadcast"><a href="#sendsomegroupbroadcast" class="header-anchor">#</a> <code>sendSomeGroupBroadcast</code></h4> <ul><li>定义
<p>根据<code>id</code>对某个群组的一些特定客户端发送消息.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">void</span> <span class="token function">sendSomeGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span><span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> some<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendSomeGroupBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> groupId<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">,</span><span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> some<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td>群组的id</td></tr> <tr><td><code>msg</code></td> <td><code>java.lang.Object</code></td> <td>需要发送的消息对象</td></tr> <tr><td><code>callback</code></td> <td><code>site.peaklee.framework.session.MessageGroupCallback</code></td> <td>发送后的<a href="#%E7%BE%A4%E7%BB%84-messagegroupcallback">回调函数</a></td></tr> <tr><td><code>some</code></td> <td><code>site.peaklee.framework.session.impl.Session[]</code></td> <td>需要发送的客户端</td></tr></tbody></table> <ul><li>返回值:无</li></ul> <h4 id="sendbroadcast"><a href="#sendbroadcast" class="header-anchor">#</a> <code>sendBroadcast</code></h4> <ul><li>定义
<p>对所有在线的客户端发送消息.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">void</span> <span class="token function">sendBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">,</span><span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exclude<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">,</span><span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> exclude<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>msg</code></td> <td><code>java.lang.Object</code></td> <td>需要发送的消息对象</td></tr> <tr><td><code>callback</code></td> <td><code>site.peaklee.framework.session.MessageGroupCallback</code></td> <td>发送后的<a href="#%E7%BE%A4%E7%BB%84-messagegroupcallback">回调函数</a></td></tr> <tr><td><code>exclude</code></td> <td><code>site.peaklee.framework.session.impl.Session[]</code></td> <td>不需要发送的客户端</td></tr></tbody></table> <ul><li>返回值:无</li></ul> <h4 id="sendbroadcast-2"><a href="#sendbroadcast-2" class="header-anchor">#</a> <code>sendBroadcast</code></h4> <ul><li>定义
<p>对所有在线的一些特定客户端发送消息.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">void</span> <span class="token function">sendSomeBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">,</span><span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> some<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">sendSomeBroadcast</span><span class="token punctuation">(</span><span class="token class-name">Object</span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageGroupCallback</span> callback<span class="token punctuation">,</span><span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> some<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>参数</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数意义</th></tr></thead> <tbody><tr><td><code>msg</code></td> <td><code>java.lang.Object</code></td> <td>需要发送的消息对象</td></tr> <tr><td><code>callback</code></td> <td><code>site.peaklee.framework.session.MessageGroupCallback</code></td> <td>发送后的<a href="#%E7%BE%A4%E7%BB%84-messagegroupcallback">回调函数</a></td></tr> <tr><td><code>some</code></td> <td><code>site.peaklee.framework.session.impl.Session[]</code></td> <td>需要发送的客户端</td></tr></tbody></table> <ul><li>返回值:无</li></ul> <h3 id="适配器-adaptersessionmanager"><a href="#适配器-adaptersessionmanager" class="header-anchor">#</a> 适配器(<code>AdapterSessionManager</code>)</h3> <p>它更像一个接口的代理类,虽然它也是一个接口,但是它内部已经代理了`SessionFind`和`SessionManager`接口,所以无需实现它,如果想在一个类中实现对`Session`的管理,那么直接实现即可.</p> <div class="custom-block tip"><p class="custom-block-title">Example</p> <p>假设有一个Web的处理类,需要对某个群组发送通知,我们可以使用以下代码实现</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">site<span class="token punctuation">.</span>peaklee<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">AdapterSessionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">site<span class="token punctuation">.</span>peaklee<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">MessageGroupCallback</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/web&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token keyword">implements</span> <span class="token class-name">AdapterSessionManager</span><span class="token punctuation">{</span>

        <span class="token annotation punctuation">@GetMapping</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">sendGroupBroadcast</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>msg<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">MessageGroupCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">GroupSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;message send successful&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
    
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failed</span><span class="token punctuation">(</span><span class="token class-name">GroupSession</span> session<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Session</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;message send failed to :{}&quot;</span><span class="token punctuation">,</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h2 id="连接对象"><a href="#连接对象" class="header-anchor">#</a> 连接对象</h2> <p>为了更加方便的管理<code>Channel</code>,这里把它封装被一个个的<code>Session</code>对象</p> <h3 id="客户端-session"><a href="#客户端-session" class="header-anchor">#</a> 客户端(<code>Session</code>)</h3> <p>所有的客户端将都被抽象成为一个<b>Session</b>&gt;对象,这个对象包含了基础发送消息,回调函数信息,绑定不同的<b>Channel</b>对象,记录初始的上线时间和离线时间等.</p> <h4 id="session"><a href="#session" class="header-anchor">#</a> <code>Session</code></h4> <ul><li>属性</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>读写</th> <th>解释</th></tr></thead> <tbody><tr><td><code>channel</code></td> <td><code>io.netty.channel.Channel</code></td> <td><code>RW</code></td> <td><code>Netty</code>的<code>Channel</code>对象</td></tr> <tr><td><code>id</code></td> <td><code>java.io.Serializable</code></td> <td><code>RW</code></td> <td>客户端的唯一主键</td></tr> <tr><td><code>sessionId</code></td> <td><code>io.netty.channel.ChannelId</code></td> <td><code>RW</code></td> <td><code>Channel</code>中的<code>ChannelId</code></td></tr> <tr><td><code>ip</code></td> <td><code>java.lang.String</code></td> <td><code>RW</code></td> <td>客户端的远程IP</td></tr> <tr><td><code>activeTime</code></td> <td><code>java.util.Date</code></td> <td><code>RW</code></td> <td>客户端的上线时间</td></tr> <tr><td><code>inactiveTime</code></td> <td><code>java.util.Date</code></td> <td><code>RW</code></td> <td>客户端的离线时间</td></tr></tbody></table> <ul><li>方法</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数</th> <th>返回值</th> <th>解释</th></tr></thead> <tbody><tr><td><code>create</code></td> <td><code>static</code></td> <td><code>id</code>:定义客户端的id <br> <code>channel</code>:客户端的连接通道</td> <td><code>Session</code></td> <td>根据<code>Channel</code>创建一个<code>Session</code></td></tr> <tr><td><code>bindChannel</code></td> <td><code>-</code></td> <td><code>channel</code>:客户端的连接通道</td> <td><code>Session</code></td> <td>将一个<code>Channel</code>绑定到<code>Session</code></td></tr> <tr><td><code>send</code></td> <td><code>-</code></td> <td><code>callback</code>:发送消息的回调函数 <br><code>msg</code>:需要发送的消息</td> <td><code>void</code></td> <td>将消息发送到客户端</td></tr></tbody></table> <h3 id="群组-groupsession"><a href="#群组-groupsession" class="header-anchor">#</a> 群组(<code>GroupSession</code>)</h3> <p>它是对一组<b>Session</b>集合的管理,负责增删改查,消息发送,清除,创建等.</p> <h4 id="groupsession"><a href="#groupsession" class="header-anchor">#</a> <code>GroupSession</code></h4> <ul><li>属性</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>读写</th> <th>解释</th></tr></thead> <tbody><tr><td><code>channelGroup</code></td> <td><code>io.netty.channel.group.channelGroup</code></td> <td><code>R</code></td> <td><code>Netty</code>的<code>ChannelGroup</code>对象</td></tr> <tr><td><code>groupSession</code></td> <td><code>java.util.Map</code></td> <td><code>R</code></td> <td><code>Session</code>集合</td></tr> <tr><td><code>groupId</code></td> <td><code>java.io.Serializable</code></td> <td><code>RW</code></td> <td>群组的<code>id</code></td></tr></tbody></table> <ul><li>方法</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数</th> <th>返回值</th> <th>解释</th></tr></thead> <tbody><tr><td><code>create</code></td> <td><code>static</code></td> <td><code>grouoId</code>:定义群组的id</td> <td><code>GroupSession</code></td> <td>根据<code>id</code>创建一个<code>GroupSession</code></td></tr> <tr><td><code>add</code></td> <td><code>-</code></td> <td><code>session</code>:需要添加的客户端</td> <td><code>GroupSession</code></td> <td>添加一个客户端到群组,链式调用</td></tr> <tr><td><code>remove</code></td> <td><code>-</code></td> <td><code>id</code>:需要移除的客户端的id</td> <td><code>Session</code></td> <td>在群组内移除客户端</td></tr> <tr><td><code>findSession</code></td> <td><code>-</code></td> <td><code>id</code>:需要查找的客户端的id</td> <td><code>Session</code></td> <td>查找客户端</td></tr> <tr><td><code>hasSession</code></td> <td><code>-</code></td> <td><code>id</code>:需要查找的客户端的id</td> <td><code>Boolean</code></td> <td>查找是否存在客户端</td></tr> <tr><td><code>clear</code></td> <td><code>-</code></td> <td><code>-</code></td> <td><code>void</code></td> <td>清除掉群组内的所有客户端信息</td></tr> <tr><td><code>size</code></td> <td><code>-</code></td> <td><code>-</code></td> <td><code>Integer</code></td> <td>返回组群的在线客户端数量</td></tr> <tr><td><code>sendBroadcast</code></td> <td><code>-</code></td> <td><code>callback</code>:发送消息的回调函数 <br><code>msg</code>:需要发送的消息 <br> <code>exclude</code>:需要排除的客户端</td> <td><code>void</code></td> <td>将消息发送到组群内所有符合要求的客户端</td></tr> <tr><td><code>sendSome</code></td> <td><code>-</code></td> <td><code>callback</code>:发送消息的回调函数 <br><code>msg</code>:需要发送的消息 <br> <code>some</code>:需要发送的客户端</td> <td><code>void</code></td> <td>将消息发送到组群内所有符合要求的客户端</td></tr></tbody></table> <h3 id="应用程序-applicationsession"><a href="#应用程序-applicationsession" class="header-anchor">#</a> 应用程序(<code>ApplicationSession</code>)</h3> <p> 这个主要是封装启动的服务器所返回的<b>ChannelFuture</b>,实现发送消息(仅程序为客户端时),添加异步回调监听等.</p> <h4 id="applicationsession"><a href="#applicationsession" class="header-anchor">#</a> <code>ApplicationSession</code></h4> <ul><li>属性</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>读写</th> <th>解释</th></tr></thead> <tbody><tr><td><code>channel</code></td> <td><code>io.netty.channel.Channel</code></td> <td><code>R</code></td> <td><code>Netty</code>的<code>Channel</code>对象</td></tr> <tr><td><code>channelFuture</code></td> <td><code>io.netty.channel.ChannelFuture</code></td> <td><code>R</code></td> <td><code>Netty</code>的<code>ChannelFuture</code>对象</td></tr></tbody></table> <ul><li>方法</li></ul> <table><thead><tr><th>名称</th> <th>类型</th> <th>参数</th> <th>返回值</th> <th>解释</th></tr></thead> <tbody><tr><td><code>create</code></td> <td><code>static</code></td> <td><code>channel</code>:<code>Netty</code>的<code>Channel</code>对象 <br> <code>channelFuture</code>:<code>Netty</code>的<code>Channel</code>对象</td> <td><code>ApplicationSession</code></td> <td>根据<code>Netty</code>返回信息创建一个<code>ApplicationSession</code></td></tr> <tr><td><code>addListener</code></td> <td><code>-</code></td> <td><code>callback</code>:一个<code>Lambda</code>表达式函数</td> <td><code>void</code></td> <td>添加一个<code>Lambda</code>表达式函数</td></tr> <tr><td><code>send</code></td> <td><code>-</code></td> <td><code>callback</code>:发送消息的回调函数 <br><code>msg</code>:需要发送的消息</td> <td><code>void</code></td> <td>对当前服务器发送消息</td></tr> <tr><td><code>close</code></td> <td><code>-</code></td> <td><code>-</code></td> <td><code>void</code></td> <td>关闭服务器</td></tr></tbody></table> <h2 id="回调"><a href="#回调" class="header-anchor">#</a> 回调</h2> <p>这个回调仅仅是对消息发送成功与否的回调.</p> <h3 id="连接-messagecallback"><a href="#连接-messagecallback" class="header-anchor">#</a> 连接(<code>MessageCallback</code>)</h3> <h4 id="messagecallback"><a href="#messagecallback" class="header-anchor">#</a> MessageCallback</h4> <p>它是对应客户端消息是否发送成功的回调.</p> <ul><li><code>success()</code></li> <li>回调参数: <code>(Session)session</code> 必传</li> <li>回调参数: <code>(Object)msg</code> 可能为<code>NULL</code></li> <li>消息发送成功后会触发该回调</li></ul> <hr> <ul><li><code>failed()</code></li> <li>回调参数: <code>(Session)session</code> 必传</li> <li>回调参数: <code>(Object)msg</code> 可能为<code>NULL</code></li> <li>消息发送失败后会触发该回调</li></ul> <h3 id="群组-messagegroupcallback"><a href="#群组-messagegroupcallback" class="header-anchor">#</a> 群组(<code>MessageGroupCallback</code>)</h3> <h4 id="messagegroupcallback"><a href="#messagegroupcallback" class="header-anchor">#</a> MessageGroupCallback</h4> <p>它是对应群组消息是否发送成功的回调.</p> <ul><li><code>success()</code></li> <li>回调参数: <code>groupSession</code> 必传</li> <li>回调参数: <code>msg</code> 可能为<code>NULL</code></li> <li>消息发送成功后会触发该回调</li></ul> <hr> <ul><li><code>failed()</code></li> <li>回调参数: <code>(GroupSession)session</code> 必传</li> <li>回调参数: <code>(List&lt;Session&gt;)ids</code> 必传,发送失败的客户端</li> <li>回调参数: <code>(Object)msg</code> 可能为<code>NULL</code></li> <li>消息发送失败后会触发该回调</li></ul> <h3 id="客户端-messageservercallback"><a href="#客户端-messageservercallback" class="header-anchor">#</a> 客户端(<code>MessageServerCallback</code>)</h3> <h4 id="messageservercallback"><a href="#messageservercallback" class="header-anchor">#</a> MessageServerCallback</h4> <p>它是对应应用程序消息是否发送成功的回调.</p> <ul><li><code>success()</code></li> <li>回调参数: <code>(ApplicationSession)session</code> 必传</li> <li>回调参数: <code>(Object)msg</code> 可能为<code>NULL</code></li> <li>消息发送成功后会触发该回调</li></ul> <hr> <ul><li><code>failed()</code></li> <li>回调参数: <code>(ApplicationSession)session</code> 必传</li> <li>回调参数: <code>(Object)msg</code> 可能为<code>NULL</code></li> <li>消息发送失败后会触发该回调</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/spring-boot-netty-starter/guide/auto-config.html" class="prev">
        配置(Configure)
      </a></span> <span class="next"><a href="/spring-boot-netty-starter/guide/protocol.html">
        协议(Protocol)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/spring-boot-netty-starter/assets/js/app.2662a8e6.js" defer></script><script src="/spring-boot-netty-starter/assets/js/2.b8bc1b17.js" defer></script><script src="/spring-boot-netty-starter/assets/js/20.45c71554.js" defer></script>
  </body>
</html>
